<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Al-Amel školski online sistem</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root {
    --primary:#5038ff;
    --bg:#f5f7ff;
    --card:#ffffff;
    --text:#222;
    --muted:#6b7280;
    --present:#16a34a;
    --absent:#ef4444;
    --late:#f59e0b;
  }

  body {
    margin:0;
    background:var(--bg);
    font-family:Poppins, sans-serif;
  }

  .wrap {
    max-width:480px;
    margin:25px auto;
    padding:20px;
  }

  .card {
    background:var(--card);
    padding:22px;
    border-radius:18px;
    box-shadow:0 10px 40px rgba(0,0,0,0.07);
  }

  h1 {
    text-align:center;
    margin-top:0;
    font-weight:600;
    color:var(--primary);
  }

  label { display:block; margin-bottom:6px; color:var(--muted); }

  input, select, textarea {
    width:100%;
    padding:12px;
    border-radius:12px;
    border:1px solid #dbe2ff;
    font-size:15px;
    margin-bottom:10px;
    background:#f9faff;
  }

  button {
    width:100%;
    padding:12px;
    border-radius:12px;
    border:0;
    cursor:pointer;
    font-weight:600;
    color:white;
    background:var(--primary);
  }

  .logout { background:#ff3b3b; margin-top:10px; }

  .panel {
    margin-top:15px;
    padding:15px;
    border-radius:14px;
    background:#f9faff;
    border:1px solid #ebefff;
  }

  .hidden { display:none; }

  .grade-row {
    display:flex;
    justify-content:space-between;
    margin-bottom:10px;
  }

  .status-pill {
    display:flex;
    gap:10px;
  }

  .pill {
    padding:8px 14px;
    border-radius:20px;
    cursor:pointer;
    font-size:14px;
    font-weight:600;
    border:1px solid transparent;
    user-select:none;
  }

  .pill.present { background:#d1fae5; color:#065f46; }
  .pill.absent  { background:#fee2e2; color:#991b1b; }
  .pill.late    { background:#fef3c7; color:#92400e; }

  .pill.active.present { border-color:#065f46; }
  .pill.active.absent  { border-color:#991b1b; }
  .pill.active.late    { border-color:#92400e; }

  .note-box {
    background:#f4f2ff;
    padding:12px;
    border-radius:10px;
    margin-top:8px;
  }

  .attendance-view {
    font-weight:600;
    padding:10px;
    border-radius:10px;
    margin-top:8px;
    text-align:center;
  }

  .av-present { background:#d1fae5; color:#065f46; }
  .av-absent  { background:#fee2e2; color:#991b1b; }
  .av-late    { background:#fef3c7; color:#92400e; }
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <h1>Al-Amel školski online sistem</h1>

    <!-- Teacher Login -->
    <div id="teacherLogin">
      <label>Prijava nastavnika</label>
      <input id="teacherPass" type="password" placeholder="Lozinka nastavnika">
      <button onclick="loginTeacher()">Prijava</button>
    </div>

    <!-- Parent Login -->
    <div id="parentLogin" style="margin-top:15px;">
      <label>Prijava roditelja</label>
      <input id="parentName" placeholder="Ime učenika (npr. fatma)">
      <input id="parentPass" type="password" placeholder="Lozinka roditelja">
      <button onclick="loginParent()">Prijava</button>
    </div>

    <!-- Teacher Panel -->
    <div id="teacherPanel" class="panel hidden">
      <h3>Panel nastavnika</h3>

      <label>Unesite ime učenika</label>
      <input id="studentName" placeholder="npr. fatma">

      <h4>Ocjene</h4>
      <div id="gradesEditor"></div>

      <h4>Status prisustva</h4>
      <div class="status-pill">
        <div class="pill present"    id="pill_present"  onclick="selectStatus('present')">Prisutan</div>
        <div class="pill absent"     id="pill_absent"   onclick="selectStatus('absent')">Odsutan</div>
        <div class="pill late"       id="pill_late"     onclick="selectStatus('late')">Kasni</div>
      </div>

      <h4>Bilješka nastavnika</h4>
      <textarea id="noteText" placeholder="Unesite bilješku..."></textarea>

      <button onclick="saveAll()">Sačuvaj podatke</button>
      <button class="logout" onclick="logout()">Odjava</button>
    </div>

    <!-- Parent Panel -->
    <div id="parentPanel" class="panel hidden">
      <h3>Panel roditelja</h3>

      <div><b>Učenik:</b> <span id="parentStudent"></span></div>

      <h4>Ocjene</h4>
      <div id="gradesView"></div>

      <h4>Status prisustva</h4>
      <div id="attendanceView" class="attendance-view">-</div>

      <h4>Bilješka nastavnika</h4>
      <div id="noteView" class="note-box">Nema bilješki.</div>

      <button class="logout" onclick="logout()">Odjava</button>
    </div>

  </div>
</div>

<script>
/* -------- Login podaci -------- */
const TEACHER_PASSWORD = "teacher123";
const STUDENTS = {
  fatma:"fatma123",
  emir:"emir123",
  amina:"amina123",
  selma:"selma123"
};

/* -------- Predmeti -------- */
const SUBJECTS = [
  "Matematika","Bosanski","Engleski","Islamski","Historija","Geografija",
  "Informatika","Fizika","Hemija","Biologija","Likovno","Tehničko"
];

/* -------- Helpers -------- */
function key(n){ return "data_"+n; }
function load(n){
  const r = localStorage.getItem(key(n));
  if(!r) return {grades:{},note:"",status:"present"};
  return JSON.parse(r);
}
function save(n,obj){
  localStorage.setItem(key(n),JSON.stringify(obj));
}

/* -------- Login -------- */
function loginTeacher(){
  if(document.getElementById("teacherPass").value !== TEACHER_PASSWORD){
    alert("Pogrešna lozinka"); return;
  }
  document.getElementById("teacherLogin").classList.add("hidden");
  document.getElementById("parentLogin").classList.add("hidden");
  document.getElementById("teacherPanel").classList.remove("hidden");

  buildGradeEditor("fatma");
  loadStatus("fatma");
  document.getElementById("studentName").value = "fatma";
}

function loginParent(){
  const name = document.getElementById("parentName").value.toLowerCase();
  const pass = document.getElementById("parentPass").value;
  if(!STUDENTS[name] || STUDENTS[name] !== pass){
    alert("Pogrešan login"); return;
  }

  document.getElementById("teacherLogin").classList.add("hidden");
  document.getElementById("parentLogin").classList.add("hidden");
  document.getElementById("parentPanel").classList.remove("hidden");

  document.getElementById("parentStudent").innerText = name;
  renderParent(name);
}

/* -------- Teacher grade editor -------- */
function buildGradeEditor(name){
  const s = load(name);
  const box = document.getElementById("gradesEditor");
  box.innerHTML = "";

  SUBJECTS.forEach(sub=>{
    const val = s.grades[sub] ?? 0;
    box.innerHTML += `
      <div class="grade-row">
        <div>${sub}</div>
        <input type="number" id="g_${sub}" value="${val}" min="0" max="100">
      </div>`;
  });
}

let currentStatus="present";

function selectStatus(st){
  currentStatus = st;
  ["present","absent","late"].forEach(v=>{
    document.getElementById("pill_"+v).classList.remove("active");
  });
  document.getElementById("pill_"+st).classList.add("active");
}

function loadStatus(name){
  const s = load(name);
  currentStatus = s.status || "present";
  selectStatus(currentStatus);
}

/* -------- Save all -------- */
function saveAll(){
  const name = document.getElementById("studentName").value.toLowerCase();
  if(!name){ alert("Unesite ime učenika"); return; }

  const s = load(name);
  SUBJECTS.forEach(sub=>{
    const v = Number(document.getElementById("g_"+sub).value);
    if(!isNaN(v)) s.grades[sub]=v;
  });

  s.note = document.getElementById("noteText").value;
  s.status = currentStatus;

  save(name,s);
  alert("Sačuvano!");
}

/* -------- Parent view -------- */
function renderParent(name){
  const s = load(name);

  // Grades
  const g = document.getElementById("gradesView");
  g.innerHTML = "";
  SUBJECTS.forEach(sub=>{
    const v = s.grades[sub] ?? 0;
    g.innerHTML += `<div><b>${sub}:</b> ${v}</div>`;
  });

  // Attendance
  const a = document.getElementById("attendanceView");
  if(s.status==="present"){ a.className="attendance-view av-present";  a.innerText="Prisutan"; }
  if(s.status==="absent"){  a.className="attendance-view av-absent";   a.innerText="Odsutan"; }
  if(s.status==="late"){    a.className="attendance-view av-late";     a.innerText="Kasni"; }

  // Note
  document.getElementById("noteView").innerText = s.note || "Nema bilješki.";
}

function logout(){ location.reload(); }
</script>

</body>
</html>
